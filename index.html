<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<meta name="theme-color" content="#1A0E12"/>
<title>A Love Memoir</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,300;0,6..96,700;1,6..96,300;1,6..96,400&family=Jost:wght@200;300;400&family=Great+Vibes&display=swap" rel="stylesheet"/>
<style>

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸŒ¸ PANDUAN EDIT â€” Ctrl+F cari teks [ ]

   [NAMA_DIA]       â†’ nama gebetan
   [NAMA_KAMU]      â†’ nama kamu
   [FOTO_1..9]      â†’ URL foto di collage ch1
   [FOTO_A..F]      â†’ URL foto polaroid ch2
   [CAPTION_A..F]   â†’ keterangan foto ch2
   [FOTO_SURAT]     â†’ foto dari dia di ch4
   [CAPTION_SURAT]  â†’ keterangan foto ch4
   [CHAPTER_1_MSG]  â†’ pesan di ch1
   [CHAPTER_2_MSG]  â†’ pesan di ch2
   [QUOTE_MSG]      â†’ kalimat besar di ch3
   [FOTO_CH3]       â†’ foto besar di papan ch3  â† BARU
   [SURAT_P1..P3]   â†’ isi surat (di JS bawah)
   [PENUTUP_MSG]    â†’ pesan penutup ch5
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root {
  --ink:       #1A0E12;
  --wine:      #6B2D42;
  --rose:      #C97A93;
  --blush:     #F2C4CE;
  --champagne: #F5E6D3;
  --cream:     #FBF5EF;
  --gold:      #C9A96E;
  --white:     #FFFAF7;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

html {
  scroll-behavior: smooth;
  scroll-snap-type: y proximity;
}

body {
  background: var(--ink);
  color: var(--cream);
  font-family: 'Jost', sans-serif;
  font-weight: 300;
  overflow-x: hidden;
}

::-webkit-scrollbar { width: 2px; }
::-webkit-scrollbar-track { background: var(--ink); }
::-webkit-scrollbar-thumb { background: var(--rose); border-radius: 2px; }

/* â”€â”€ Custom cursor (desktop only) â”€â”€ */
#cursor, #cursor-ring { display: none; }
@media (hover: hover) and (pointer: fine) {
  body { cursor: none; }
  #cursor {
    display: block; position: fixed;
    width: 10px; height: 10px;
    background: var(--rose); border-radius: 50%;
    pointer-events: none; z-index: 9999;
    transform: translate(-50%,-50%);
    mix-blend-mode: difference;
  }
  #cursor-ring {
    display: block; position: fixed;
    width: 32px; height: 32px;
    border: 1px solid rgba(201,122,147,0.45); border-radius: 50%;
    pointer-events: none; z-index: 9998;
    transform: translate(-50%,-50%);
    transition: width 0.25s, height 0.25s;
  }
}

/* â”€â”€ Film grain â”€â”€ */
#grain {
  position: fixed; inset: -50%;
  width: 200%; height: 200%;
  opacity: 0.04; pointer-events: none; z-index: 9990;
  animation: grain 0.45s steps(1) infinite;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 180px 180px;
}
@keyframes grain {
  0%  { transform: translate(0,0); }
  25% { transform: translate(3%,2%); }
  50% { transform: translate(-2%,4%); }
  75% { transform: translate(2%,-3%); }
  100%{ transform: translate(-1%,2%); }
}

/* â”€â”€ Loading â”€â”€ */
#loader {
  position: fixed; inset: 0;
  background: var(--ink); z-index: 9000;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 1.8rem;
  transition: opacity 0.8s ease, visibility 0.8s ease;
}
#loader.hidden { opacity:0; visibility:hidden; pointer-events:none; }
.loader-heart { font-size: 2.5rem; animation: heartbeat 0.9s ease infinite; }
@keyframes heartbeat {
  0%,100%{ transform:scale(1); } 14%{ transform:scale(1.22); }
  28%{ transform:scale(1); } 42%{ transform:scale(1.15); } 70%{ transform:scale(1); }
}
.loader-bar-wrap { width: min(200px, 60vw); height: 1px; background: rgba(255,255,255,0.08); }
.loader-bar {
  height: 1px;
  background: linear-gradient(90deg, var(--wine), var(--rose), var(--gold));
  width: 0%; transition: width 0.06s linear;
}
.loader-text {
  font-size: 0.6rem; letter-spacing: 0.4em;
  text-transform: uppercase; color: var(--rose);
  opacity: 0.6; text-align: center; padding: 0 1rem;
}

/* â”€â”€ Chapter indicator â”€â”€ */
#chapter-indicator {
  position: fixed;
  top: max(1rem, env(safe-area-inset-top));
  right: 1.2rem; z-index: 500;
  text-align: right; opacity: 0;
  transition: opacity 0.5s ease; pointer-events: none;
}
#chapter-indicator.visible { opacity: 1; }
.ch-num {
  font-family: 'Bodoni Moda', serif; font-size: 0.62rem;
  letter-spacing: 0.22em; color: var(--rose); opacity: 0.7; display: block;
}
.ch-title {
  font-size: 0.55rem; letter-spacing: 0.28em;
  text-transform: uppercase; color: rgba(255,255,255,0.3);
  display: block; margin-top: 2px;
}

/* â”€â”€ Nav dots â”€â”€ */
#nav-dots {
  position: fixed; right: 0.8rem; top: 50%;
  transform: translateY(-50%);
  z-index: 500; display: flex; flex-direction: column;
  gap: 12px; opacity: 0; transition: opacity 0.5s ease;
}
#nav-dots.visible { opacity: 1; }
.dot {
  width: 4px; height: 4px; border-radius: 2px;
  background: rgba(255,255,255,0.2); cursor: pointer;
  transition: background 0.3s, height 0.3s;
  -webkit-tap-highlight-color: transparent;
}
.dot.active { background: var(--rose); height: 18px; }
@media (max-width: 360px) { #nav-dots { display: none; } }

/* â”€â”€ Section base â”€â”€ */
.chapter {
  min-height: 100vh; min-height: 100svh;
  width: 100%; scroll-snap-align: start;
  position: relative; overflow: hidden;
  display: flex; align-items: center; justify-content: center;
}

/* â”€â”€ Scroll reveal â”€â”€ */
.sr {
  opacity: 0; transform: translateY(32px);
  transition: opacity 0.85s cubic-bezier(0.22,1,0.36,1),
              transform 0.85s cubic-bezier(0.22,1,0.36,1);
}
.sr.d1 { transition-delay: 0.1s; }
.sr.d2 { transition-delay: 0.22s; }
.sr.d3 { transition-delay: 0.36s; }
.sr.d4 { transition-delay: 0.5s; }
.sr.go { opacity:1; transform: translateY(0); }

@keyframes riseIn {
  from { opacity:0; transform: translateY(28px); }
  to   { opacity:1; transform: translateY(0); }
}
@keyframes blink { 0%,100%{ opacity:1; } 50%{ opacity:0; } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CH 0 â€” COVER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ch0 {
  background: var(--ink);
  flex-direction: column; text-align: center;
  padding: 5rem 2rem 6rem; gap: 0;
}
.cover-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 80% 55% at 50% 65%, rgba(107,45,66,0.55) 0%, transparent 70%),
    radial-gradient(ellipse 45% 40% at 15% 15%, rgba(201,169,110,0.07) 0%, transparent 60%),
    radial-gradient(ellipse 35% 35% at 85% 80%, rgba(201,122,147,0.1) 0%, transparent 60%);
  pointer-events: none;
}
.petal-float {
  position: absolute; pointer-events: none; opacity: 0;
  animation: floatPetal linear infinite;
}
@keyframes floatPetal {
  0%  { opacity:0; transform: translateY(105vh) rotate(0deg); }
  5%  { opacity:0.6; }
  95% { opacity:0.35; }
  100%{ opacity:0; transform: translateY(-8vh) rotate(540deg); }
}

.cover-eyebrow {
  display: block; font-style: italic;
  font-size: clamp(1rem, 2vw, 2rem);
  letter-spacing: 0.4em; text-transform: uppercase;
  color: var(--gold); margin-bottom: 1.8rem;
  position: relative; z-index: 2; opacity: 0;
  animation: riseIn 1.2s 2.8s cubic-bezier(0.22,1,0.36,1) forwards;
}
.cover-title {
  font-family: 'Bodoni Moda', serif; font-weight: 300;
  line-height: 0.95; position: relative; z-index: 2;
  opacity: 0; animation: riseIn 1.4s 3s cubic-bezier(0.22,1,0.36,1) forwards;
}
.cover-title .line1 {
  display: block; font-style: italic;
  font-size: clamp(2rem, 5vw, 6rem); color: var(--cream);
}
.cover-title .name-display {
  display: block; font-family: 'Great Vibes', cursive;
  font-size: clamp(3.5rem, 13vw, 10rem); color: var(--gold);
  font-weight: 400; line-height: 1.2;
  text-shadow: 0 0 60px rgba(201,169,110,0.35);
}
.cover-title .line2 {
  display: block; font-size: clamp(0.6rem, 2.2vw, 0.85rem);
  letter-spacing: 0.28em; text-transform: uppercase;
  color: rgba(201,122,147,0.6); margin-top: 1rem;
  font-weight: 300; font-style: normal;
}
.cover-scroll {
  position: absolute;
  bottom: max(2rem, env(safe-area-inset-bottom, 2rem));
  left: 50%; transform: translateX(-50%);
  z-index: 2; display: flex; flex-direction: column;
  align-items: center; gap: 0.5rem;
  opacity: 0; animation: riseIn 1s 4s ease forwards;
}
.cover-scroll span {
  font-size: 0.5rem; letter-spacing: 0.4em;
  text-transform: uppercase; color: rgba(255,255,255,0.25);
}
.scroll-line {
  width: 1px; height: 40px;
  background: linear-gradient(to bottom, var(--rose), transparent);
  animation: lineGrow 2s 4.2s ease infinite;
}
@keyframes lineGrow {
  0%,100%{ height:16px; opacity:0; } 50%{ height:40px; opacity:1; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CH 1 â€” COLLAGE WALL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ch1 { background: var(--ink); padding: 0; }

.wall-grid {
  position: absolute; inset: 0;
  display: grid; gap: 3px;
  grid-template-columns: repeat(6, 1fr);
  grid-template-rows: repeat(4, 1fr);
}
@media (max-width: 600px) {
  .wall-grid {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(5, 1fr);
  }
  .wall-cell:nth-child(n+16) { display: none; }
}
.wall-cell { overflow: hidden; }
.wall-cell img {
  width: 100%; height: 100%;
  object-fit: cover; display: block;
  filter: saturate(0.45) brightness(0.5);
  transition: filter 0.5s ease;
}
#ch1::after {
  content: ''; position: absolute; inset: 0;
  background:
    linear-gradient(to right, rgba(26,14,18,0.92) 0%, rgba(26,14,18,0.3) 50%, rgba(26,14,18,0.75) 100%),
    linear-gradient(to bottom, rgba(26,14,18,0.55) 0%, transparent 40%, rgba(26,14,18,0.9) 100%);
  pointer-events: none;
}
.ch1-content {
  position: relative; z-index: 2;
  max-width: 560px; width: 100%;
  padding: clamp(1.5rem, 6vw, 3.5rem);
}
.ch1-content .roman {
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(0.55rem, 1.8vw, 0.65rem);
  letter-spacing: 0.4em; color: var(--gold);
  opacity: 0.6; margin-bottom: 1rem; display: block;
}
.ch1-content h2 {
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(2rem, 6.5vw, 5rem);
  font-weight: 300; font-style: italic;
  line-height: 1.12; margin-bottom: 1.5rem; color: var(--cream);
}
.ch1-content h2 em {
  font-style: normal; color: var(--rose); display: block;
}
.ch1-content p {
  font-size: clamp(0.85rem, 2.2vw, 1rem);
  line-height: 1.85; color: rgba(245,230,211,0.65);
  max-width: 440px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CH 2 â€” FOTO / KENANGAN
   Mobile: grid polaroid vertikal
   Desktop: scattered polaroids
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ch2 {
  background: var(--champagne); color: var(--ink);
  padding: 4rem 0; align-items: center;
}
.ch2-bg-text {
  position: absolute;
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(4rem, 20vw, 18rem);
  font-weight: 700; font-style: italic;
  color: rgba(107,45,66,0.05);
  white-space: nowrap; user-select: none; pointer-events: none;
  top: 50%; left: 50%; transform: translate(-50%,-50%);
}

/* Center text block */
.ch2-inner {
  position: relative; z-index: 3;
  display: flex; flex-direction: column;
  align-items: center; gap: 2.5rem;
  width: 100%; padding: 0 1.5rem;
}
.ch2-text { text-align: center; max-width: 400px; }
.ch2-text .roman {
  font-size: clamp(0.55rem, 1.8vw, 0.65rem);
  letter-spacing: 0.38em; color: var(--wine);
  opacity: 0.5; margin-bottom: 0.8rem; display: block;
}
.ch2-text h2 {
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(1.9rem, 5.5vw, 3.8rem);
  font-weight: 300; line-height: 1.2;
  color: var(--wine); margin-bottom: 1rem;
}
.ch2-text h2 em { font-style: italic; color: var(--rose); }
.ch2-text p {
  font-size: clamp(0.82rem, 2.2vw, 0.95rem);
  line-height: 1.82; color: rgba(26,14,18,0.6);
}

/* Mobile photo grid */
.photo-grid-mobile {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px; width: 100%; max-width: 480px;
}
.pgm-card {
  background: var(--white);
  padding: 7px 7px 30px;
  box-shadow: 0 8px 24px rgba(26,14,18,0.12);
  position: relative;
  transition: transform 0.35s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.35s;
}
.pgm-card:nth-child(odd)  { transform: rotate(-2.5deg); }
.pgm-card:nth-child(even) { transform: rotate(2deg); margin-top: 18px; }
.pgm-card:nth-child(3)    { margin-top: -8px; }
.pgm-card:nth-child(5)    { grid-column: 1 / span 2; max-width: 55%; margin: 0 auto; }
.pgm-card:active, .pgm-card:hover {
  transform: rotate(0deg) scale(1.04) !important;
  box-shadow: 0 16px 40px rgba(26,14,18,0.2); z-index: 10;
}
.pgm-card img {
  width: 100%; aspect-ratio: 4/5;
  object-fit: cover; display: block; background: var(--blush);
}
.pgm-cap {
  position: absolute; bottom: 5px; left: 0; right: 0;
  text-align: center; font-family: 'Great Vibes', cursive;
  font-size: clamp(0.75rem, 2.5vw, 0.95rem);
  color: var(--wine); opacity: 0.65;
}

/* Desktop: hide mobile grid, show scatter */
@media (min-width: 900px) {
  #ch2 { padding: 0; }
  .ch2-inner {
    position: absolute; inset: 0;
    justify-content: center; padding: 0;
    pointer-events: none;
  }
  .ch2-text {
    position: relative; z-index: 5;
    pointer-events: auto; padding: 2rem;
  }
  .photo-grid-mobile { display: none; }

  .scatter-card {
    display: block !important;
    position: absolute;
    background: var(--white);
    padding: 8px 8px 38px;
    box-shadow: 0 10px 40px rgba(26,14,18,0.14), 0 2px 8px rgba(26,14,18,0.07);
    transition: transform 0.4s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.4s;
    z-index: 1;
  }
  .scatter-card:hover {
    transform: rotate(0deg) scale(1.07) translateY(-10px) !important;
    box-shadow: 0 28px 70px rgba(26,14,18,0.22);
    z-index: 10;
  }
  .scatter-card img { width: 160px; height: 200px; object-fit: cover; display: block; background: var(--blush); }
  .scatter-card .s-cap {
    position: absolute; bottom: 7px; left: 0; right: 0;
    text-align: center; font-family: 'Great Vibes', cursive;
    font-size: 0.95rem; color: var(--wine); opacity: 0.65;
  }
  .sc1 { top: 8%;   left: 5%;   transform: rotate(-6deg); }
  .sc2 { top: 4%;   right: 6%;  transform: rotate(5deg); }
  .sc3 { bottom:9%; left: 7%;   transform: rotate(4deg); }
  .sc4 { bottom:7%; right: 5%;  transform: rotate(-4deg); }
  .sc5 { top:30%;   left: 1%;   transform: rotate(-2.5deg); z-index:3; }
  .sc6 { top:28%;   right: 1%;  transform: rotate(3deg); z-index:3; }
}

/* Mobile: hide scatter */
@media (max-width: 899px) {
  .scatter-card { display: none !important; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CH 3 â€” BIG QUOTE + PHOTO BOARD
   âœï¸ HANYA BAGIAN INI YANG DIUBAH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ch3 {
  background: var(--wine);
  flex-direction: column; text-align: center;
  gap: 0; padding: 3rem 2rem;
  /* Beri ruang lebih untuk foto */
  justify-content: center;
}
#ch3::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(ellipse 65% 60% at 50% 50%, rgba(201,122,147,0.18) 0%, transparent 70%);
  pointer-events: none;
}

/* Layout ch3: teks atas, foto tengah, teks bawah */
.ch3-top {
  display: flex; flex-direction: column;
  align-items: center; gap: 1rem;
  margin-bottom: 2rem;
  position: relative; z-index: 2;
}
.ch3-bottom {
  display: flex; flex-direction: column;
  align-items: center; gap: 1rem;
  margin-top: 2rem;
  position: relative; z-index: 2;
}

.quote-roman {
  font-size: clamp(0.55rem, 1.8vw, 0.65rem);
  letter-spacing: 0.42em; color: rgba(255,255,255,0.38);
  text-transform: uppercase; position: relative; z-index: 2;
}
.deco-line {
  width: 50px; height: 1px;
  background: rgba(201,169,110,0.38);
  position: relative; z-index: 2;
}
.big-quote-text {
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(1.8rem, 5.5vw, 6rem);
  font-weight: 300; line-height: 1.2;
  max-width: 840px; position: relative; z-index: 2; color: var(--cream);
}
.big-quote-text em { font-style: italic; color: var(--gold); }
.big-quote-text .uw { position: relative; display: inline-block; }
.big-quote-text .uw::after {
  content: ''; position: absolute;
  bottom: -3px; left: 0; right: 0;
  height: 1.5px; background: var(--gold);
  transform: scaleX(0); transform-origin: left;
  transition: transform 1.1s cubic-bezier(0.22,1,0.36,1);
}
.big-quote-text .uw.lit::after { transform: scaleX(1); }
.quote-attr {
  font-size: clamp(0.6rem, 1.8vw, 0.75rem);
  letter-spacing: 0.28em; color: rgba(255,255,255,0.32);
  position: relative; z-index: 2;
}

/* â”€â”€ Papan foto besar di tengah ch3 â”€â”€ */
.ch3-photo-board {
  position: relative; z-index: 2;
  display: flex; flex-direction: column; align-items: center;
  gap: 0.6rem;
}

.ch3-board-frame {
  /* Frame kayu / papan */
  background: var(--white);
  padding: clamp(8px, 1.5vw, 16px) clamp(8px, 1.5vw, 16px) clamp(28px, 5vw, 50px);
  box-shadow:
    0 0 0 2px rgba(201,169,110,0.5),
    0 0 0 6px rgba(107,45,66,0.3),
    0 20px 60px rgba(0,0,0,0.4),
    0 4px 12px rgba(0,0,0,0.3);
  position: relative;
  width: min(340px, 80vw);
  transition: transform 0.5s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.5s;
}
.ch3-board-frame:hover {
  transform: scale(1.03);
  box-shadow:
    0 0 0 2px rgba(201,169,110,0.7),
    0 0 0 6px rgba(107,45,66,0.4),
    0 32px 80px rgba(0,0,0,0.5);
}

/* Pin / paku di pojok atas */
.ch3-board-frame::before {
  content: 'ğŸ“Œ';
  position: absolute;
  top: -14px; left: 50%;
  transform: translateX(-50%);
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  z-index: 3;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
}

.ch3-board-frame img {
  width: 100%;
  aspect-ratio: 4/3;
  object-fit: cover;
  display: block;
  background: var(--blush);
  filter: saturate(0.9) contrast(1.02);
}

/* Caption di bawah foto dalam frame */
.ch3-board-caption {
  position: absolute;
  bottom: clamp(5px, 1.5vw, 12px);
  left: 0; right: 0;
  text-align: center;
  font-family: 'Great Vibes', cursive;
  font-size: clamp(1rem, 3vw, 1.4rem);
  color: var(--wine);
  opacity: 0.7;
}

/* Caption kecil di bawah frame */
.ch3-board-sub {
  font-size: clamp(0.55rem, 1.5vw, 0.68rem);
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.3);
  margin-top: 0.3rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CH 4 â€” SURAT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ch4 {
  background: var(--cream); color: var(--ink);
  padding: clamp(3rem, 8vw, 5rem) 0;
  flex-wrap: wrap; align-items: flex-start;
  gap: 0;
}
#ch4::before {
  content: ''; position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 55% 55% at 80% 50%, rgba(242,196,206,0.4) 0%, transparent 60%),
    radial-gradient(ellipse 40% 40% at 10% 80%, rgba(201,169,110,0.1) 0%, transparent 60%);
  pointer-events: none;
}

.ch4-photo-wrap {
  position: absolute;
  right: clamp(1rem, 5vw, 5rem);
  top: 50%; transform: translateY(-50%) rotate(5deg);
  z-index: 10;
  transition: transform 0.45s cubic-bezier(0.34,1.56,0.64,1);
}
.ch4-photo-wrap:hover { transform: translateY(-54%) rotate(0deg) scale(1.06); }

.ch4-polaroid {
  background: var(--white);
  padding: 10px 10px 52px;
  box-shadow: 0 12px 36px rgba(26,14,18,0.14), 0 3px 10px rgba(26,14,18,0.08);
  position: relative;
  width: clamp(130px, 17vw, 200px);
}
.ch4-polaroid::before {
  content: ''; position: absolute;
  top: -11px; left: 50%;
  transform: translateX(-50%) rotate(-2deg);
  width: 52px; height: 20px;
  background: rgba(201,169,110,0.38); border-radius: 2px;
}
.ch4-polaroid img {
  width: 100%; aspect-ratio: 3/4;
  object-fit: cover; display: block;
  background: var(--blush);
  filter: saturate(0.82);
  transition: filter 0.4s ease;
}
.ch4-photo-wrap:hover .ch4-polaroid img { filter: saturate(1.05); }
.ch4-pol-cap {
  position: absolute; bottom: 12px; left: 0; right: 0;
  text-align: center; font-family: 'Great Vibes', cursive;
  font-size: clamp(0.85rem, 2vw, 1.1rem); color: var(--wine); opacity: 0.65;
}

@media (max-width: 750px) {
  .ch4-photo-wrap {
    position: relative; right: auto; top: auto;
    transform: rotate(4deg);
    margin: 0 auto 2rem; display: block; width: fit-content;
  }
  .ch4-photo-wrap:hover { transform: rotate(0deg) scale(1.03); }
  .ch4-polaroid { width: min(150px, 40vw); }
  #ch4 {
    flex-direction: column;
    align-items: center;
    padding: 3rem 0;
  }
}

.letter-wrap {
  position: relative; z-index: 2;
  width: min(640px, 92vw); margin: 0 auto;
}
.letter-wrap .roman {
  font-size: clamp(0.55rem, 1.8vw, 0.65rem);
  letter-spacing: 0.38em; color: var(--wine);
  opacity: 0.48; margin-bottom: 1.4rem; display: block;
}
.letter-wrap > h2 {
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(1.9rem, 5.5vw, 4.5rem);
  font-weight: 300; font-style: italic;
  color: var(--wine); margin-bottom: 1.8rem; line-height: 1.1;
}
.letter-paper {
  background: var(--white); border-radius: 2px;
  padding: clamp(1.4rem, 5vw, 3rem) clamp(1.2rem, 5vw, 3.2rem);
  box-shadow:
    0 0 0 1px rgba(201,169,110,0.12),
    0 16px 50px rgba(26,14,18,0.07),
    inset 0 0 0 1px rgba(255,255,255,0.4);
  position: relative; overflow: hidden;
}
.letter-paper::before {
  content: ''; position: absolute; top: 0; left: 0;
  width: 3px; height: 100%;
  background: linear-gradient(to bottom, var(--rose), var(--gold));
}
.letter-paper::after {
  content: ''; position: absolute; inset: 0;
  background-image: repeating-linear-gradient(
    transparent, transparent 31px,
    rgba(201,169,110,0.07) 31px, rgba(201,169,110,0.07) 32px
  );
  pointer-events: none;
}
.letter-greeting {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(1.5rem, 4.5vw, 2rem);
  color: var(--wine); margin-bottom: 1.2rem;
}
#letter-body { position: relative; z-index: 1; }
#letter-body p {
  font-size: clamp(0.83rem, 2.2vw, 1rem);
  line-height: 1.9; color: rgba(26,14,18,0.72);
  margin-bottom: 1.2rem; font-weight: 300;
}
.letter-sign-block {
  margin-top: 2rem; display: flex;
  flex-direction: column; align-items: flex-end; gap: 0.2rem;
}
.letter-with-love {
  font-size: clamp(0.55rem, 1.8vw, 0.65rem);
  letter-spacing: 0.28em; text-transform: uppercase;
  color: rgba(26,14,18,0.35);
}
.letter-sign {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(1.7rem, 5.5vw, 2.5rem); color: var(--wine);
}
.type-cursor {
  display: inline-block; width: 2px; height: 1em;
  background: var(--rose); vertical-align: text-bottom;
  animation: blink 1s step-end infinite; margin-left: 1px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CH 5 â€” CLOSING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ch5 {
  background: linear-gradient(165deg, #2a0d1a 0%, #1a0a10 55%, #220d18 100%);
  flex-direction: column; text-align: center;
  gap: 1.4rem;
  padding: 5rem 1.8rem max(3rem, env(safe-area-inset-bottom, 3rem));
}
#ch5::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(ellipse 75% 70% at 50% 50%, rgba(107,45,66,0.55) 0%, transparent 70%);
  pointer-events: none;
}
#heart-bursts { position: absolute; inset: 0; pointer-events: none; }
.heart-burst {
  position: absolute; pointer-events: none;
  animation: burstFly linear infinite; opacity: 0;
}
@keyframes burstFly {
  0%  { opacity:0; transform: translateY(0) scale(0.4); }
  15% { opacity:1; }
  100%{ opacity:0; transform: translateY(-140px) scale(0.8); }
}
.closing-eyebrow {
  font-size: clamp(0.5rem, 1.8vw, 0.6rem);
  letter-spacing: 0.5em; text-transform: uppercase;
  color: var(--gold); opacity: 0.55; position: relative; z-index: 2;
}
.closing-big {
  font-family: 'Bodoni Moda', serif;
  font-size: clamp(2.5rem, 8.5vw, 8rem);
  font-weight: 300; line-height: 1.05;
  position: relative; z-index: 2; color: var(--cream);
}
.closing-big em { font-style: italic; color: var(--rose); display: block; }
.closing-big .from-name {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(2.5rem, 8vw, 6.5rem);
  color: var(--gold); display: block; line-height: 1.2;
}
.closing-msg {
  max-width: 460px;
  font-size: clamp(0.82rem, 2.2vw, 0.95rem);
  line-height: 1.85; color: rgba(245,230,211,0.48);
  position: relative; z-index: 2;
}
.closing-footer {
  font-size: clamp(0.5rem, 1.5vw, 0.58rem);
  letter-spacing: 0.32em; color: rgba(255,255,255,0.18);
  position: relative; z-index: 2; margin-top: 1rem;
}

</style>
</head>
<body>

<div id="cursor"></div>
<div id="cursor-ring"></div>
<div id="grain"></div>

<!-- LOADING -->
<div id="loader">
  <div class="loader-heart">ğŸ¤</div>
  <div class="loader-bar-wrap"><div class="loader-bar" id="loader-bar"></div></div>
  <p class="loader-text">mempersiapkan sesuatu untukmu...</p>
</div>

<!-- CHAPTER INDICATOR -->
<div id="chapter-indicator">
  <span class="ch-num" id="ci-num">Pembuka</span>
  <span class="ch-title" id="ci-title">Cover</span>
</div>

<!-- NAV DOTS -->
<nav id="nav-dots">
  <div class="dot active" data-t="0"></div>
  <div class="dot" data-t="1"></div>
  <div class="dot" data-t="2"></div>
  <div class="dot" data-t="3"></div>
  <div class="dot" data-t="4"></div>
  <div class="dot" data-t="5"></div>
</nav>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CH 0 â€” COVER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="chapter" id="ch0">
  <div class="cover-bg"></div>
  <div id="petals-wrap"></div>

  <p class="cover-eyebrow">HAPPY 19Th BRITHDAY </p>

  <h1 class="cover-title">
    <span class="line1">to:</span>
    <span class="name-display">Qanitah Ananda U.</span>
    <span class="line2">19 08 2007</span>
  </h1>

  <div class="cover-scroll">
    <div class="scroll-line"></div>
    <span>scroll</span>
  </div>
</section>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CH 1 â€” COLLAGE WALL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="chapter" id="ch1">

  <div class="wall-grid">
    <div class="wall-cell"><img src="image/nitah1.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ“¸'"/></div>
    <div class="wall-cell"><img src="image/nitah2.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸ’•'"/></div>
    <div class="wall-cell"><img src="image/nitah3.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ“¸'"/></div>
    <div class="wall-cell"><img src="image/nitah4.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=âœ¨'"/></div>
    <div class="wall-cell"><img src="image/nitah5.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ’—'"/></div>
    <div class="wall-cell"><img src="image/nitah6.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ·'"/></div>
    <div class="wall-cell"><img src="image/nitah6.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ“¸'"/></div>
    <div class="wall-cell"><img src="image/nitah5.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸ’•'"/></div>
    <div class="wall-cell"><img src="image/nitah4.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=âœ¨'"/></div>
    <div class="wall-cell"><img src="image/nitah3.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ¸'"/></div>
    <div class="wall-cell"><img src="image/nitah2.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ’—'"/></div>
    <div class="wall-cell"><img src="image/nitah1.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ·'"/></div>
    <div class="wall-cell"><img src="image/nitah1.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ“¸'"/></div>
    <div class="wall-cell"><img src="image/nitah2.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸ’•'"/></div>
    <div class="wall-cell"><img src="image/nitah3.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=âœ¨'"/></div>
    <div class="wall-cell"><img src="image/nitah5.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ¸'"/></div>
    <div class="wall-cell"><img src="image/nitah5.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ’—'"/></div>
    <div class="wall-cell"><img src="image/nitah6.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ·'"/></div>
    <div class="wall-cell"><img src="image/nitah6.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ“¸'"/></div>
    <div class="wall-cell"><img src="image/nitah5.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸ’•'"/></div>
    <div class="wall-cell"><img src="image/nitah4.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=âœ¨'"/></div>
    <div class="wall-cell"><img src="image/nitah3.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ¸'"/></div>
    <div class="wall-cell"><img src="image/nitah2.png" onerror="this.src='https://placehold.co/400x300/2d1520/6b2d42?text=ğŸ’—'"/></div>
    <div class="wall-cell"><img src="image/nitah1.png" onerror="this.src='https://placehold.co/400x300/3a1a28/7a3555?text=ğŸŒ·'"/></div>
  </div>

  <div class="ch1-content">
    <span class="roman sr">Chapter I</span>
    <h2 class="sr d1">
      Hal pertama yang<br/>
      <em>aku pikirkan.</em>
    </h2>
    <p class="sr d2">
    Hmmmm... Mulainya dari mana ya? Selamat ulang tahun ya Nitahh,
    </p>
  </div>

</section>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CH 2 â€” FOTO KENANGAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="chapter" id="ch2">

  <div class="ch2-bg-text">Memories</div>

  <div class="scatter-card sc1 sr"><img src="[FOTO_A]" onerror="this.src='https://placehold.co/160x200/fde8f0/c9638a?text=ğŸ“¸'"/><span class="s-cap">[CAPTION_A]</span></div>
  <div class="scatter-card sc2 sr d1"><img src="[FOTO_B]" onerror="this.src='https://placehold.co/160x200/f9e4ec/e8a0b8?text=ğŸ’•'"/><span class="s-cap">[CAPTION_B]</span></div>
  <div class="scatter-card sc3 sr d2"><img src="[FOTO_C]" onerror="this.src='https://placehold.co/160x200/fde8f0/c9638a?text=ğŸŒ¸'"/><span class="s-cap">[CAPTION_C]</span></div>
  <div class="scatter-card sc4 sr d1"><img src="[FOTO_D]" onerror="this.src='https://placehold.co/160x200/f9e4ec/e8a0b8?text=âœ¨'"/><span class="s-cap">[CAPTION_D]</span></div>
  <div class="scatter-card sc5 sr d3"><img src="[FOTO_E]" onerror="this.src='https://placehold.co/160x200/fde8f0/c9638a?text=ğŸ’—'"/><span class="s-cap">[CAPTION_E]</span></div>
  <div class="scatter-card sc6 sr d2"><img src="[FOTO_F]" onerror="this.src='https://placehold.co/160x200/f9e4ec/e8a0b8?text=ğŸŒ·'"/><span class="s-cap">[CAPTION_F]</span></div>

  <div class="ch2-inner">
    <div class="ch2-text">
      <span class="roman sr">Chapter II</span>
      <h2 class="sr d1">Momen-momen<br/>yang <em>tak terlupakan.</em></h2>
      <p class="sr d2">[CHAPTER_2_MSG] â€” Setiap foto menyimpan cerita. Kenangan kecil yang mungkin sepele, tapi diam-diam selalu kamu ingat dan tersenyum karenanya.</p>
    </div>

    <div class="photo-grid-mobile sr d2">
      <div class="pgm-card"><img src="[FOTO_A]" onerror="this.src='https://placehold.co/200x250/fde8f0/c9638a?text=ğŸ“¸'"/><span class="pgm-cap">[CAPTION_A]</span></div>
      <div class="pgm-card"><img src="[FOTO_B]" onerror="this.src='https://placehold.co/200x250/f9e4ec/e8a0b8?text=ğŸ’•'"/><span class="pgm-cap">[CAPTION_B]</span></div>
      <div class="pgm-card"><img src="[FOTO_C]" onerror="this.src='https://placehold.co/200x250/fde8f0/c9638a?text=ğŸŒ¸'"/><span class="pgm-cap">[CAPTION_C]</span></div>
      <div class="pgm-card"><img src="[FOTO_D]" onerror="this.src='https://placehold.co/200x250/f9e4ec/e8a0b8?text=âœ¨'"/><span class="pgm-cap">[CAPTION_D]</span></div>
      <div class="pgm-card"><img src="[FOTO_E]" onerror="this.src='https://placehold.co/200x250/fde8f0/c9638a?text=ğŸ’—'"/><span class="pgm-cap">[CAPTION_E]</span></div>
    </div>
  </div>

</section>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CH 3 â€” BIG QUOTE + PAPAN FOTO BESAR
     âœï¸ Edit: [FOTO_CH3] dan [CAPTION_CH3]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="chapter" id="ch3">

  <!-- Teks atas -->
  <div class="ch3-top">
    <span class="quote-roman sr">Chapter III</span>
    <div class="deco-line sr d1"></div>
    <h2 class="big-quote-text sr d2">
      Ada sesuatu tentang dirimu
      yang membuat hari-hariku
      terasa <em>lebih <span class="uw">berwarna.</span></em>
    </h2>
  </div>

  <!-- âœ… PAPAN FOTO BESAR DI TENGAH -->
  <!-- âœï¸ Ganti [FOTO_CH3] dengan URL foto, [CAPTION_CH3] dengan keterangan -->
  <div class="ch3-photo-board sr d2">
    <div class="ch3-board-frame">
      <img src="[FOTO_CH3]" onerror="this.src='https://placehold.co/340x255/3a1a28/c97a93?text=ğŸ“¸+foto+disini'"/>
      <span class="ch3-board-caption">[CAPTION_CH3]</span>
    </div>
    <span class="ch3-board-sub">Hadir mu saja sudah banyak membawa warna warna yang sebelumnya tidak ada di hidupku</span>
    <span class="ch3-board-sub">dan mempertajam Warna yang telah ada sebelumnya</span>
  </div>

  <!-- Teks bawah -->
  <div class="ch3-bottom">
    <div class="deco-line sr d3"></div>
    <!-- âœï¸ [NAMA_KAMU] -->
    <span class="quote-attr sr d4">â€” Nanda</span>
  </div>

</section>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CH 4 â€” SURAT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="chapter" id="ch4">
  <div class="letter-wrap">
    <span class="roman sr">Chapter IV</span>
    <h2 class="sr d1">Sebuah surat,<br/>untukmu.</h2>

    <div class="letter-paper sr d2">
      <p class="letter-greeting">Dear [NAMA_DIA],</p>
      <div id="letter-body"></div>
      <div class="letter-sign-block sr d3">
        <span class="letter-with-love">dengan tulus,</span>
        <span class="letter-sign">[NAMA_KAMU]</span>
      </div>
    </div>
  </div>
</section>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CH 5 â€” CLOSING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="chapter" id="ch5">

  <div id="heart-bursts"></div>

  <span class="closing-eyebrow sr">Fin â€” The End</span>

  <h2 class="closing-big sr d1">
    Semoga kamu
    <em>selalu bahagia,</em>
    <span class="from-name">[NAMA_DIA].</span>
  </h2>

  <p class="closing-msg sr d2">
    [PENUTUP_MSG] â€” Tulis pesan penutupmu di sini. Kata-kata
    terakhir yang ingin kamu tinggalkan. Tulus, hangat, dan dari
    hati yang paling dalam. ğŸ’•
  </p>

  <p class="closing-footer sr d3">dibuat dengan â™¡ oleh [NAMA_KAMU], untuk [NAMA_DIA]</p>

</section>


<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âœï¸ ISI SURAT â€” Edit 3 paragraf di sini
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const LETTER_PARAGRAPHS = [
  "[SURAT_P1] â€” Tulis paragraf pertama di sini. Ceritakan kapan kamu mulai menyukainya dan momen yang membuatmu menyadarinya.",
  "[SURAT_P2] â€” Paragraf kedua. Hal-hal spesifik yang kamu kagumi â€” cara bicaranya, cara dia tertawa, atau kebiasaan kecilnya yang selalu kamu perhatikan.",
  "[SURAT_P3] â€” Penutup. Sampaikan harapanmu dengan jujur. Tidak perlu sempurna â€” yang penting dari hati. ğŸŒ¸"
];

/* â•â•â• CHAPTER DATA â•â•â• */
const CHAPTERS = [
  { num:'Pembuka',      title:'Cover'       },
  { num:'Chapter I',   title:'Hal Pertama' },
  { num:'Chapter II',  title:'Kenangan'    },
  { num:'Chapter III', title:'Perasaan'    },
  { num:'Chapter IV',  title:'Surat'       },
  { num:'Chapter V',   title:'Penutup'     },
];

/* â•â•â• LOADING â•â•â• */
const loaderBar = document.getElementById('loader-bar');
const loader    = document.getElementById('loader');
let prog = 0;
const loadTick = setInterval(() => {
  prog = Math.min(100, prog + Math.random() * 18 + 5);
  loaderBar.style.width = prog + '%';
  if (prog >= 100) clearInterval(loadTick);
}, 120);
window.addEventListener('load', () => {
  setTimeout(() => {
    loader.classList.add('hidden');
    document.getElementById('chapter-indicator').classList.add('visible');
    document.getElementById('nav-dots').classList.add('visible');
    spawnPetals();
    spawnHearts();
  }, 2400);
});

/* â•â•â• CUSTOM CURSOR (desktop only) â•â•â• */
const isTouch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;
if (!isTouch) {
  const cur = document.getElementById('cursor');
  const ring = document.getElementById('cursor-ring');
  let mx=0,my=0,rx=0,ry=0;
  document.addEventListener('mousemove', e => {
    mx=e.clientX; my=e.clientY;
    cur.style.left=mx+'px'; cur.style.top=my+'px';
  });
  (function animR() {
    rx+=(mx-rx)*0.12; ry+=(my-ry)*0.12;
    ring.style.left=rx+'px'; ring.style.top=ry+'px';
    requestAnimationFrame(animR);
  })();
}

/* â•â•â• FLOATING PETALS â•â•â• */
function spawnPetals() {
  const wrap = document.getElementById('petals-wrap');
  const items = ['ğŸŒ¸','ğŸŒ·','âœ¨','ğŸ’®'];
  for (let i=0;i<20;i++) {
    const p = document.createElement('div');
    p.className = 'petal-float';
    p.textContent = items[i%items.length];
    p.style.cssText = `left:${Math.random()*100}vw;font-size:${0.7+Math.random()*0.7}rem;animation-duration:${8+Math.random()*10}s;animation-delay:${Math.random()*12}s;`;
    wrap.appendChild(p);
  }
}

/* â•â•â• HEART BURSTS â•â•â• */
function spawnHearts() {
  const c = document.getElementById('heart-bursts');
  const h = ['ğŸ’•','ğŸ’—','ğŸ’–','ğŸŒ¸','âœ¨'];
  for (let i=0;i<18;i++) {
    const el = document.createElement('div');
    el.className = 'heart-burst';
    el.textContent = h[i%h.length];
    el.style.cssText = `left:${10+Math.random()*80}%;bottom:${5+Math.random()*35}%;font-size:${0.9+Math.random()*1.4}rem;animation-duration:${2.5+Math.random()*2.5}s;animation-delay:${Math.random()*6}s;`;
    c.appendChild(el);
  }
}

/* â•â•â• INTERSECTION â€” SECTIONS â•â•â• */
const sections = document.querySelectorAll('.chapter');
const dots     = document.querySelectorAll('.dot');
const ciNum    = document.getElementById('ci-num');
const ciTitle  = document.getElementById('ci-title');
let letterDone = false, quoteDone = false;

const secObs = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (!e.isIntersecting) return;
    const idx = [...sections].indexOf(e.target);
    dots.forEach(d => d.classList.remove('active'));
    if (dots[idx]) dots[idx].classList.add('active');
    if (CHAPTERS[idx]) {
      ciNum.textContent   = CHAPTERS[idx].num;
      ciTitle.textContent = CHAPTERS[idx].title;
    }
    if (e.target.id === 'ch4' && !letterDone) { letterDone = true; setTimeout(startTypewriter, 700); }
    if (e.target.id === 'ch3' && !quoteDone)  { quoteDone  = true; setTimeout(() => document.querySelectorAll('.uw').forEach(el => el.classList.add('lit')), 900); }
  });
}, { threshold: 0.4 });
sections.forEach(s => secObs.observe(s));

/* â•â•â• SCROLL REVEAL â€” ELEMENTS â•â•â• */
const elObs = new IntersectionObserver(entries => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('go'); });
}, { threshold: 0.08, rootMargin: '0px 0px -30px 0px' });
document.querySelectorAll('.sr').forEach(el => elObs.observe(el));

/* â•â•â• NAV DOTS â•â•â• */
dots.forEach(dot => {
  dot.addEventListener('click', () => {
    const i = parseInt(dot.dataset.t);
    sections[i].scrollIntoView({ behavior: 'smooth' });
  });
});

/* â•â•â• TYPEWRITER â•â•â• */
function startTypewriter() {
  const body = document.getElementById('letter-body');
  body.innerHTML = '';
  let pIdx = 0;
  function typeNext() {
    if (pIdx >= LETTER_PARAGRAPHS.length) return;
    const para = document.createElement('p');
    const cur  = document.createElement('span');
    cur.className = 'type-cursor';
    para.appendChild(cur);
    body.appendChild(para);
    const text = LETTER_PARAGRAPHS[pIdx];
    let ci = 0;
    const t = setInterval(() => {
      if (ci >= text.length) {
        clearInterval(t); cur.remove(); pIdx++;
        setTimeout(typeNext, 350); return;
      }
      para.insertBefore(document.createTextNode(text[ci]), cur);
      ci++;
    }, 22);
  }
  typeNext();
}

/* â•â•â• PARALLAX (desktop only) â•â•â• */
if (!isTouch) {
  document.addEventListener('mousemove', e => {
    const ch1 = document.getElementById('ch1');
    const r = ch1.getBoundingClientRect();
    if (r.top > window.innerHeight || r.bottom < 0) return;
    const xS = (e.clientX/window.innerWidth  - 0.5) * 12;
    const yS = (e.clientY/window.innerHeight - 0.5) * 8;
    document.querySelectorAll('.wall-cell img').forEach((img, i) => {
      const d = 0.5 + (i%3)*0.25;
      img.style.transform = `translate(${xS*d}px,${yS*d}px) scale(1.08)`;
    });
  });
}
</script>
</body>
</html>
